<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>
<body>
    <div id="vue_app">
    <p>Allowed Cookie</p>
    <button :disabled="cookieAllowed==`allowed`" @click='setCookie(true)'>Allow</button>
    <button :disabled="cookieAllowed==  `banned` " @click='setCookie(false)'>Ban</button>
    </div>
    <script>

        let app=Vue.createApp({
        data(){
            return{
                cookieAllowed:'Unknown',
            }
        },
        created(){
  let json=[]


            let cookie=this.processCookie();
            if(cookie.exists){
                if(cookie.allowed=='allowed'){
                    this.cookieAllowed='allowed'
                }else{
                    this.cookieAllowed='banned'
                }
            }else{
                this.cookieAllowed='Unknown'
            } 
        },

        methods:{

            setCookie(dir){
                if(dir){
                    document.cookie='allowed=allowed'
                    this.cookieAllowed='allowed'
                }else{
                    document.cookie='allowed=banned'
                    this.cookieAllowed='banned'
                }
            },
            processCookie(){
                if(document.cookie){
                    let obj={exists:true}
                    document.cookie.split(';').map((elem)=>{
                        let arr=elem.split('=')
                        let prop=arr[0].trim();
                        let val=arr[1].trim();
                        if(isNaN(val)){
                            if(val=='true'){
                                val=true
                            }else if(val=='false'){
                                    val=false;
                            }
                        }else{
                            val=Number(val)
                        }
                        obj[prop]=val;
                    })

                    return obj;
                }else{
                    return {exists:false}
                }
            }
        }
        })
        let vm=app.mount('#vue_app');
    </script>
</body>
</html>